{"version":3,"file":"swup.js","sources":["swup.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Swup\"] = factory();\n\telse\n\t\troot[\"Swup\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.query = query;\nexports.queryAll = queryAll;\nfunction query(selector) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n    if (typeof selector !== 'string') {\n        return selector;\n    }\n\n    return context.querySelector(selector);\n}\n\nfunction queryAll(selector) {\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n    if (typeof selector !== 'string') {\n        return selector;\n    }\n\n    return Array.prototype.slice.call(context.querySelectorAll(selector));\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Link = function () {\n    function Link() {\n        _classCallCheck(this, Link);\n\n        this.link = document.createElement(\"a\");\n    }\n\n    _createClass(Link, [{\n        key: 'setPath',\n        value: function setPath(href) {\n            this.link.href = href;\n        }\n    }, {\n        key: 'getPath',\n        value: function getPath() {\n            var path = this.link.pathname;\n            if (path[0] != '/') {\n                path = '/' + path;\n            }\n            return path;\n        }\n    }, {\n        key: 'getAddress',\n        value: function getAddress() {\n            var path = this.link.pathname + this.link.search;\n            if (path[0] != '/') {\n                path = '/' + path;\n            }\n            return path;\n        }\n    }, {\n        key: 'getHash',\n        value: function getHash() {\n            return this.link.hash;\n        }\n    }]);\n\n    return Link;\n}();\n\nexports.default = Link;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(3);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = _index2.default; // this is here for webpack to expose Swup as window.Swup\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// helpers\n\n\n// modules\n\n\nvar _delegate = __webpack_require__(4);\n\nvar _delegate2 = _interopRequireDefault(_delegate);\n\nvar _Cache = __webpack_require__(6);\n\nvar _Cache2 = _interopRequireDefault(_Cache);\n\nvar _Link = __webpack_require__(1);\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nvar _transitionEnd = __webpack_require__(7);\n\nvar _transitionEnd2 = _interopRequireDefault(_transitionEnd);\n\nvar _request = __webpack_require__(8);\n\nvar _request2 = _interopRequireDefault(_request);\n\nvar _getDataFromHtml = __webpack_require__(9);\n\nvar _getDataFromHtml2 = _interopRequireDefault(_getDataFromHtml);\n\nvar _loadPage = __webpack_require__(10);\n\nvar _loadPage2 = _interopRequireDefault(_loadPage);\n\nvar _renderPage = __webpack_require__(11);\n\nvar _renderPage2 = _interopRequireDefault(_renderPage);\n\nvar _createState = __webpack_require__(12);\n\nvar _createState2 = _interopRequireDefault(_createState);\n\nvar _triggerEvent = __webpack_require__(13);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _getUrl = __webpack_require__(14);\n\nvar _getUrl2 = _interopRequireDefault(_getUrl);\n\nvar _scrollTo = __webpack_require__(15);\n\nvar _scrollTo2 = _interopRequireDefault(_scrollTo);\n\nvar _classify = __webpack_require__(16);\n\nvar _classify2 = _interopRequireDefault(_classify);\n\nvar _doScrolling = __webpack_require__(17);\n\nvar _doScrolling2 = _interopRequireDefault(_doScrolling);\n\nvar _markSwupElements = __webpack_require__(18);\n\nvar _markSwupElements2 = _interopRequireDefault(_markSwupElements);\n\nvar _on = __webpack_require__(19);\n\nvar _on2 = _interopRequireDefault(_on);\n\nvar _off = __webpack_require__(20);\n\nvar _off2 = _interopRequireDefault(_off);\n\nvar _updateTransition = __webpack_require__(21);\n\nvar _updateTransition2 = _interopRequireDefault(_updateTransition);\n\nvar _preloadPage = __webpack_require__(22);\n\nvar _preloadPage2 = _interopRequireDefault(_preloadPage);\n\nvar _preloadPages = __webpack_require__(23);\n\nvar _preloadPages2 = _interopRequireDefault(_preloadPages);\n\nvar _usePlugin = __webpack_require__(24);\n\nvar _usePlugin2 = _interopRequireDefault(_usePlugin);\n\nvar _log = __webpack_require__(25);\n\nvar _log2 = _interopRequireDefault(_log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Swup = function () {\n    function Swup(setOptions) {\n        _classCallCheck(this, Swup);\n\n        // default options\n        var defaults = {\n            cache: true,\n            animationSelector: '[class*=\"transition-\"]',\n            elements: ['#swup'],\n            pageClassPrefix: '',\n            debugMode: false,\n            scroll: true,\n\n            doScrollingRightAway: false,\n            animateScroll: true,\n            scrollFriction: .3,\n            scrollAcceleration: .04,\n\n            preload: true,\n            support: true,\n            plugins: [],\n\n            skipPopStateHandling: function skipPopStateHandling(event) {\n                if (event.state && event.state.source == \"swup\") {\n                    return false;\n                }\n                return true;\n            },\n            animateHistoryBrowsing: false,\n\n            LINK_SELECTOR: 'a[href^=\"' + window.location.origin + '\"]:not([data-no-swup]), a[href^=\"/\"]:not([data-no-swup]), a[href^=\"#\"]:not([data-no-swup])',\n            FORM_SELECTOR: 'form[data-swup-form]'\n\n            /**\n             * current transition object\n             */\n        };this.transition = {};\n\n        var options = _extends({}, defaults, setOptions);\n\n        /**\n         * handler arrays\n         */\n        this._handlers = {\n            animationInDone: [],\n            animationInStart: [],\n            animationOutDone: [],\n            animationOutStart: [],\n            animationSkipped: [],\n            clickLink: [],\n            contentReplaced: [],\n            disabled: [],\n            enabled: [],\n            hoverLink: [],\n            openPageInNewTab: [],\n            pageLoaded: [],\n            pagePreloaded: [],\n            pageRetrievedFromCache: [],\n            pageView: [],\n            popState: [],\n            samePage: [],\n            samePageWithHash: [],\n            scrollDone: [],\n            scrollStart: [],\n            serverError: [],\n            submitForm: [],\n            willReplaceContent: []\n        };\n\n        /**\n         * helper variables\n         */\n        // id of element to scroll to after render\n        this.scrollToElement = null;\n        // promise used for preload, so no new loading of the same page starts while page is loading\n        this.preloadPromise = null;\n        // save options\n        this.options = options;\n        // plugins array\n        this.plugins = [];\n\n        /**\n         * make modules accessible in instance\n         */\n        this.getUrl = _getUrl2.default;\n        this.cache = new _Cache2.default();\n        this.link = new _Link2.default();\n        this.transitionEndEvent = (0, _transitionEnd2.default)();\n        this.getDataFromHtml = _getDataFromHtml2.default;\n        this.getPage = _request2.default;\n        this.scrollTo = _scrollTo2.default;\n        this.loadPage = _loadPage2.default;\n        this.renderPage = _renderPage2.default;\n        this.createState = _createState2.default;\n        this.triggerEvent = _triggerEvent2.default;\n        this.classify = _classify2.default;\n        this.doScrolling = _doScrolling2.default;\n        this.markSwupElements = _markSwupElements2.default;\n        this.on = _on2.default;\n        this.off = _off2.default;\n        this.updateTransition = _updateTransition2.default;\n        this.preloadPage = _preloadPage2.default;\n        this.preloadPages = _preloadPages2.default;\n        this.usePlugin = _usePlugin2.default;\n        this.log = _log2.default;\n        this.enable = this.enable;\n        this.destroy = this.destroy;\n\n        // attach instance to window in debug mode\n        if (this.options.debugMode) {\n            window.swup = this;\n        }\n\n        this.getUrl();\n        this.enable();\n    }\n\n    _createClass(Swup, [{\n        key: 'enable',\n        value: function enable() {\n            var _this = this;\n\n            /**\n             * support check\n             */\n            if (this.options.support) {\n                // check pushState support\n                if (!('pushState' in window.history)) {\n                    console.warn('pushState is not supported');\n                    return;\n                }\n                // check transitionEnd support\n                if ((0, _transitionEnd2.default)()) {\n                    this.transitionEndEvent = (0, _transitionEnd2.default)();\n                } else {\n                    console.warn('transitionEnd detection is not supported');\n                    return;\n                }\n                // check Promise support\n                if (typeof Promise === \"undefined\" || Promise.toString().indexOf(\"[native code]\") === -1) {\n                    console.warn('Promise is not supported');\n                    return;\n                }\n            }\n\n            // variable to keep event listeners from \"delegate\"\n            this.delegatedListeners = {};\n\n            /**\n             * link click handler\n             */\n            this.delegatedListeners.click = (0, _delegate2.default)(document, this.options.LINK_SELECTOR, 'click', this.linkClickHandler.bind(this));\n\n            /**\n             * link mouseover handler (preload)\n             */\n            this.delegatedListeners.mouseover = (0, _delegate2.default)(document.body, this.options.LINK_SELECTOR, 'mouseover', this.linkMouseoverHandler.bind(this));\n\n            /**\n             * form submit handler\n             */\n            this.delegatedListeners.formSubmit = (0, _delegate2.default)(document, this.options.FORM_SELECTOR, 'submit', this.formSubmitHandler.bind(this));\n\n            /**\n             * popstate handler\n             */\n            window.addEventListener('popstate', this.popStateHandler.bind(this));\n\n            /**\n             * initial save to cache\n             */\n            var page = this.getDataFromHtml(document.documentElement.outerHTML);\n            page.url = this.currentUrl;\n            if (this.options.cache) {\n                this.cache.cacheUrl(page, this.options.debugMode);\n            }\n\n            /**\n             * mark swup blocks in html\n             */\n            this.markSwupElements(document.documentElement);\n\n            /**\n             * enable plugins from options\n             */\n            this.options.plugins.forEach(function (item) {\n                return _this.usePlugin(item);\n            });\n\n            /**\n             * modify initial history record\n             */\n            window.history.replaceState(Object.assign({}, window.history.state, {\n                url: window.location.href,\n                random: Math.random(),\n                source: \"swup\"\n            }), document.title, window.location.href);\n\n            /**\n             * Disable browser scroll control on popstates when animateHistoryBrowsing option is enabled\n             */\n            if (this.options.animateHistoryBrowsing) {\n                window.history.scrollRestoration = \"manual\";\n            }\n\n            /**\n             * trigger enabled event\n             */\n            this.triggerEvent('enabled');\n            document.documentElement.classList.add('swup-enabled');\n\n            /**\n             * trigger page view event\n             */\n            this.triggerEvent('pageView');\n\n            /**\n             * preload pages if possible\n             */\n            this.preloadPages();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            // remove delegated listeners\n            this.delegatedListeners.click.destroy();\n            this.delegatedListeners.mouseover.destroy();\n\n            // remove popstate listener\n            window.removeEventListener('popstate', this.popStateHandler.bind(this));\n\n            // empty cache\n            this.cache.empty();\n\n            // remove swup data atributes from blocks\n            document.querySelectorAll('[data-swup]').forEach(function (element) {\n                delete element.dataset.swup;\n            });\n\n            // remove handlers\n            this.off();\n\n            this.triggerEvent('disabled');\n            document.documentElement.classList.remove('swup-enabled');\n        }\n    }, {\n        key: 'linkClickHandler',\n        value: function linkClickHandler(event) {\n            // no control key pressed\n            if (!event.metaKey) {\n                // index of pressed button needs to be checked because Firefox triggers click on all mouse buttons\n                if (event.button === 0) {\n                    this.triggerEvent('clickLink', event);\n                    var link = new _Link2.default();\n                    event.preventDefault();\n                    link.setPath(event.delegateTarget.href);\n\n                    if (link.getAddress() == this.currentUrl || link.getAddress() == '') {\n                        // link to the same URL\n                        if (link.getHash() != '') {\n                            // link to the same URL with hash\n                            this.triggerEvent('samePageWithHash', event);\n                            var element = document.querySelector(link.getHash());\n                            if (element != null) {\n                                // referenced element found\n                                if (this.options.scroll) {\n                                    var top = element.getBoundingClientRect().top + window.pageYOffset;\n                                    this.scrollTo(document.body, top);\n                                }\n                                history.replaceState({\n                                    url: link.getAddress() + link.getHash(),\n                                    random: Math.random(),\n                                    source: \"swup\"\n                                }, document.title, link.getAddress() + link.getHash());\n                            } else {\n                                // referenced element not found\n                                console.warn('Element for offset not found (' + link.getHash() + ')');\n                            }\n                        } else {\n                            // link to the same URL without hash\n                            this.triggerEvent('samePage', event);\n                            if (this.options.scroll) {\n                                this.scrollTo(document.body, 0, 1);\n                            }\n                        }\n                    } else {\n                        // link to different url\n                        if (link.getHash() != '') {\n                            this.scrollToElement = link.getHash();\n                        }\n\n                        // get custom transition from data\n                        var customTransition = event.delegateTarget.dataset.swupTransition;\n\n                        // load page\n                        this.loadPage({ url: link.getAddress(), customTransition: customTransition }, false);\n                    }\n                }\n            } else {\n                // open in new tab (do nothing)\n                this.triggerEvent('openPageInNewTab', event);\n            }\n        }\n    }, {\n        key: 'linkMouseoverHandler',\n        value: function linkMouseoverHandler(event) {\n            var _this2 = this;\n\n            this.triggerEvent('hoverLink', event);\n            if (this.options.preload) {\n                var link = new _Link2.default();\n                link.setPath(event.delegateTarget.href);\n                if (link.getAddress() != this.currentUrl && !this.cache.exists(link.getAddress()) && this.preloadPromise == null) {\n                    this.preloadPromise = new Promise(function (resolve, reject) {\n                        _this2.getPage({ url: link.getAddress() }, function (response, request) {\n                            if (request.status === 500) {\n                                _this2.triggerEvent('serverError', event);\n                                reject(link.getAddress());\n                                return;\n                            } else {\n                                // get json data\n                                var page = _this2.getDataFromHtml(response, request);\n                                if (page != null) {\n                                    page.url = link.getAddress();\n                                    _this2.cache.cacheUrl(page, _this2.options.debugMode);\n                                    _this2.triggerEvent('pagePreloaded', event);\n                                } else {\n                                    reject(link.getAddress());\n                                    return;\n                                }\n                            }\n                            resolve();\n                            _this2.preloadPromise = null;\n                        });\n                    });\n                    this.preloadPromise.route = link.getAddress();\n                }\n            }\n        }\n    }, {\n        key: 'formSubmitHandler',\n        value: function formSubmitHandler(event) {\n            // no control key pressed\n            if (!event.metaKey) {\n                this.triggerEvent('submitForm', event);\n                event.preventDefault();\n                var form = event.target;\n                var formData = new FormData(form);\n\n                var link = new _Link2.default();\n                link.setPath(form.action);\n\n                if (link.getHash() != '') {\n                    this.scrollToElement = link.getHash();\n                }\n\n                if (form.method.toLowerCase() != \"get\") {\n                    // remove page from cache\n                    this.cache.remove(link.getAddress());\n\n                    // send data\n                    this.loadPage({\n                        url: link.getAddress(),\n                        method: form.method,\n                        data: formData\n                    });\n                } else {\n                    // create base url\n                    var url = link.getAddress() || window.location.href;\n                    var inputs = form.querySelectorAll('input, select');\n                    if (url.indexOf('?') == -1) {\n                        url += \"?\";\n                    } else {\n                        url += \"&\";\n                    }\n\n                    // add form data to url\n                    inputs.forEach(function (input) {\n                        if (input.type == \"checkbox\" || input.type == \"radio\") {\n                            if (input.checked) {\n                                url += encodeURIComponent(input.name) + \"=\" + encodeURIComponent(input.value) + \"&\";\n                            }\n                        } else {\n                            url += encodeURIComponent(input.name) + \"=\" + encodeURIComponent(input.value) + \"&\";\n                        }\n                    });\n\n                    // remove last \"&\"\n                    url = url.slice(0, -1);\n\n                    // remove page from cache\n                    this.cache.remove(url);\n\n                    // send data\n                    this.loadPage({\n                        url: url\n                    });\n                }\n            } else {\n                this.triggerEvent('openFormSubmitInNewTab', event);\n            }\n        }\n    }, {\n        key: 'popStateHandler',\n        value: function popStateHandler(event) {\n            var link = new _Link2.default();\n            if (this.options.skipPopStateHandling(event)) return;\n            link.setPath(event.state ? event.state.url : window.location.pathname);\n            if (link.getHash() != '') {\n                this.scrollToElement = link.getHash();\n            } else {\n                event.preventDefault();\n            }\n            this.triggerEvent('popState', event);\n            this.loadPage({ url: link.getAddress() }, event);\n        }\n    }]);\n\n    return Swup;\n}();\n\nexports.default = Swup;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar closest = __webpack_require__(5);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cache = function () {\n    function Cache() {\n        _classCallCheck(this, Cache);\n\n        this.pages = {};\n        this.count = 0;\n        this.last = null;\n    }\n\n    _createClass(Cache, [{\n        key: 'cacheUrl',\n        value: function cacheUrl(page, displayCache) {\n            this.count++;\n            if (page.url in this.pages === false) {\n                this.pages[page.url] = page;\n            }\n            this.last = this.pages[page.url];\n            if (displayCache) {\n                this.displayCache();\n            }\n        }\n    }, {\n        key: 'getPage',\n        value: function getPage(url) {\n            return this.pages[url];\n        }\n    }, {\n        key: 'displayCache',\n        value: function displayCache() {\n            console.groupCollapsed('Cache (' + Object.keys(this.pages).length + ')');\n            for (var key in this.pages) {\n                console.log(this.pages[key]);\n            }\n            console.groupEnd();\n        }\n    }, {\n        key: 'exists',\n        value: function exists(url) {\n            if (url in this.pages) return true;\n            return false;\n        }\n    }, {\n        key: 'empty',\n        value: function empty(showLog) {\n            this.pages = {};\n            this.count = 0;\n            this.last = null;\n            if (showLog) {\n                console.log('Cache cleared');\n            }\n        }\n    }, {\n        key: 'remove',\n        value: function remove(url) {\n            delete this.pages[url];\n        }\n    }]);\n\n    return Cache;\n}();\n\nexports.default = Cache;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function transitionEnd() {\n    var el = document.createElement('div');\n\n    var transEndEventNames = {\n        WebkitTransition: 'webkitTransitionEnd',\n        MozTransition: 'transitionend',\n        OTransition: 'oTransitionEnd otransitionend',\n        transition: 'transitionend'\n    };\n\n    for (var name in transEndEventNames) {\n        if (el.style[name] !== undefined) {\n            return transEndEventNames[name];\n        }\n    }\n\n    return false;\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nmodule.exports = function (options) {\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    var defaults = {\n        url: window.location.pathname + window.location.search,\n        method: \"GET\",\n        data: null\n    };\n\n    var data = _extends({}, defaults, options);\n\n    var request = new XMLHttpRequest();\n\n    request.onreadystatechange = function () {\n        if (request.readyState === 4) {\n            if (request.status !== 500) {\n                callback(request.responseText, request);\n            } else {\n                callback(null, request);\n            }\n        }\n    };\n\n    request.open(data.method, data.url, true);\n    request.setRequestHeader(\"X-Requested-With\", \"swup\");\n    request.send(data.data);\n    return request;\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _utils = __webpack_require__(0);\n\nmodule.exports = function (html, request) {\n    var _this = this;\n\n    var content = html.replace('<body', '<div id=\"swupBody\"').replace('</body>', '</div>');\n    var fakeDom = document.createElement('div');\n    fakeDom.innerHTML = content;\n    var blocks = [];\n\n    for (var i = 0; i < this.options.elements.length; i++) {\n        if (fakeDom.querySelector(this.options.elements[i]) == null) {\n            console.warn('Element ' + this.options.elements[i] + ' is not found in cached page.');\n            return null;\n        } else {\n            (0, _utils.queryAll)(this.options.elements[i]).forEach(function (item, index) {\n                (0, _utils.queryAll)(_this.options.elements[i], fakeDom)[index].dataset.swup = blocks.length;\n                blocks.push((0, _utils.queryAll)(_this.options.elements[i], fakeDom)[index].outerHTML);\n            });\n        }\n    }\n\n    var json = {\n        title: fakeDom.querySelector('title').innerText,\n        pageClass: fakeDom.querySelector('#swupBody').className,\n        originalContent: html,\n        blocks: blocks,\n        responseURL: request != null ? request.responseURL : window.location.href\n    };\n    return json;\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _utils = __webpack_require__(0);\n\nvar forEach = Array.prototype.forEach;\n\n\nmodule.exports = function (data, popstate) {\n    var _this = this;\n\n    // scrolling\n    if (this.options.doScrollingRightAway && !this.scrollToElement) {\n        this.doScrolling(popstate);\n    }\n\n    // create array for storing animation promises\n    var animationPromises = [];\n\n    // set transition object\n    if (data.customTransition != null) {\n        this.updateTransition(window.location.pathname, data.url, data.customTransition);\n        document.documentElement.classList.add('to-' + this.classify(data.customTransition));\n    } else {\n        this.updateTransition(window.location.pathname, data.url);\n    }\n\n    if (!popstate || this.options.animateHistoryBrowsing) {\n        // start animation\n        this.triggerEvent('animationOutStart');\n        document.documentElement.classList.add('is-changing');\n        document.documentElement.classList.add('is-leaving');\n        document.documentElement.classList.add('is-animating');\n        if (popstate) {\n            document.documentElement.classList.add('is-popstate');\n        }\n        document.documentElement.classList.add('to-' + this.classify(data.url));\n\n        // detect animation end\n        var animatedElements = (0, _utils.queryAll)(this.options.animationSelector);\n        forEach.call(animatedElements, function (element) {\n            var promise = new Promise(function (resolve) {\n                element.addEventListener(_this.transitionEndEvent, function (event) {\n                    if (element == event.target) {\n                        resolve();\n                    }\n                });\n            });\n            animationPromises.push(promise);\n        });\n\n        Promise.all(animationPromises).then(function () {\n            _this.triggerEvent('animationOutDone');\n        });\n\n        // create pop element with or without anchor\n        if (this.scrollToElement != null) {\n            var pop = data.url + this.scrollToElement;\n        } else {\n            var pop = data.url;\n        }\n        if (!popstate) this.createState(pop);\n    } else {\n        // proceed without animating\n        this.triggerEvent('animationSkipped');\n    }\n\n    if (this.cache.exists(data.url)) {\n        var xhrPromise = new Promise(function (resolve) {\n            resolve();\n        });\n        this.triggerEvent('pageRetrievedFromCache');\n    } else {\n        if (!this.preloadPromise || this.preloadPromise.route != data.url) {\n            var xhrPromise = new Promise(function (resolve, reject) {\n                _this.getPage(data, function (response, request) {\n                    if (request.status === 500) {\n                        _this.triggerEvent('serverError');\n                        reject(data.url);\n                        return;\n                    } else {\n                        // get json data\n                        var page = _this.getDataFromHtml(response, request);\n                        if (page != null) {\n                            page.url = data.url;\n                        } else {\n                            reject(data.url);\n                            return;\n                        }\n                        // render page\n                        _this.cache.cacheUrl(page, _this.options.debugMode);\n                        _this.triggerEvent('pageLoaded');\n                    }\n                    resolve();\n                });\n            });\n        } else {\n            var xhrPromise = this.preloadPromise;\n        }\n    }\n\n    Promise.all(animationPromises.concat([xhrPromise])).then(function () {\n        // render page\n        _this.renderPage(_this.cache.getPage(data.url), popstate);\n        _this.preloadPromise = null;\n    }).catch(function (errorUrl) {\n        // rewrite the skipPopStateHandling function to redirect manually when the history.go is processed\n        _this.options.skipPopStateHandling = function () {\n            window.location = errorUrl;\n            return true;\n        };\n\n        // go back to the actual page were still at\n        window.history.go(-1);\n    });\n};\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _utils = __webpack_require__(0);\n\nvar _Link = __webpack_require__(1);\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar forEach = Array.prototype.forEach;\n\n\nmodule.exports = function (page, popstate) {\n    var _this = this;\n\n    document.documentElement.classList.remove('is-leaving');\n\n    // replace state in case the url was redirected\n    var link = new _Link2.default();\n    link.setPath(page.responseURL);\n\n    if (window.location.pathname !== link.getPath()) {\n        window.history.replaceState({\n            url: link.getPath(),\n            random: Math.random(),\n            source: \"swup\"\n        }, document.title, link.getPath());\n    }\n\n    // only add for non-popstate transitions\n    if (!popstate || this.options.animateHistoryBrowsing) {\n        document.documentElement.classList.add('is-rendering');\n    }\n\n    this.triggerEvent('willReplaceContent');\n\n    // replace blocks\n    for (var i = 0; i < page.blocks.length; i++) {\n        document.body.querySelector('[data-swup=\"' + i + '\"]').outerHTML = page.blocks[i];\n    }\n\n    // set title\n    document.title = page.title;\n\n    // handle classes after render\n    // remove\n    if (this.options.pageClassPrefix !== false) {\n        document.body.className.split(' ').forEach(function (className) {\n            // empty string for page class\n            if (className != \"\" && className.includes(_this.options.pageClassPrefix)) {\n                document.body.classList.remove(className);\n            }\n        });\n    }\n    // add\n    if (page.pageClass != \"\") {\n        page.pageClass.split(' ').forEach(function (className) {\n            if (className != \"\" && className.includes(_this.options.pageClassPrefix)) {\n                document.body.classList.add(className);\n            }\n        });\n    }\n\n    this.triggerEvent('contentReplaced');\n    this.triggerEvent('pageView');\n    if (!this.options.cache) {\n        this.cache.empty(this.options.debugMode);\n    }\n    setTimeout(function () {\n        if (!popstate || _this.options.animateHistoryBrowsing) {\n            _this.triggerEvent('animationInStart');\n            document.documentElement.classList.remove('is-animating');\n        }\n    }, 10);\n\n    // scrolling\n    if (!this.options.doScrollingRightAway || this.scrollToElement) {\n        this.doScrolling(popstate);\n    }\n\n    // detect animation end\n    var animatedElements = (0, _utils.queryAll)(this.options.animationSelector);\n    var promises = [];\n    forEach.call(animatedElements, function (element) {\n        var promise = new Promise(function (resolve) {\n            element.addEventListener(_this.transitionEndEvent, function (event) {\n                if (element == event.target) {\n                    resolve();\n                }\n            });\n        });\n        promises.push(promise);\n    });\n\n    //preload pages if possible\n    this.preloadPages();\n\n    if (!popstate || this.options.animateHistoryBrowsing) {\n        Promise.all(promises).then(function () {\n            _this.triggerEvent('animationInDone');\n            // remove \"to-{page}\" classes\n            document.documentElement.className.split(' ').forEach(function (classItem) {\n                if (new RegExp(\"^to-\").test(classItem) || classItem === \"is-changing\" || classItem === \"is-rendering\" || classItem === \"is-popstate\") {\n                    document.documentElement.classList.remove(classItem);\n                }\n            });\n        });\n    }\n\n    // update current url\n    this.getUrl();\n    // reset scroll-to element\n    this.scrollToElement = null;\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (url) {\n    window.history.pushState({\n        url: url || window.location.href.split(window.location.hostname)[1],\n        random: Math.random(),\n        source: \"swup\"\n    }, document.getElementsByTagName('title')[0].innerText, url || window.location.href.split(window.location.hostname)[1]);\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (eventName, originalEvent) {\n    if (this.options.debugMode && originalEvent) {\n        console.groupCollapsed('%cswup:' + '%c' + eventName, 'color: #343434', 'color: #009ACD');\n        console.log(originalEvent);\n        console.groupEnd();\n    } else if (this.options.debugMode) {\n        console.log('%cswup:' + '%c' + eventName, 'color: #343434', 'color: #009ACD');\n    }\n\n    // call saved handlers with \"on\" method and pass originalEvent object if available\n    this._handlers[eventName].forEach(function (handler) {\n        try {\n            handler(originalEvent);\n        } catch (error) {\n            console.error(error);\n        }\n    });\n\n    // trigger event on document with prefix \"swup:\"\n    var event = new CustomEvent('swup:' + eventName, { detail: eventName });\n    document.dispatchEvent(event);\n};\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function () {\n    this.currentUrl = window.location.pathname + window.location.search;\n};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (element, to) {\n    var _this = this;\n\n    var animatedScroll = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.options.animateScroll;\n\n    var friction = 1 - this.options.scrollFriction;\n    var acceleration = this.options.scrollAcceleration;\n\n    var positionY = 0;\n    var velocityY = 0;\n    var targetPositionY = 0;\n    var targetPositionYWithOffset = 0;\n    var direction = 0;\n\n    var raf = null;\n\n    function getScrollTop() {\n        return document.body.scrollTop || document.documentElement.scrollTop;\n    }\n\n    var animate = function animate() {\n        var distance = update();\n        render();\n\n        if (direction === 1 && targetPositionY > positionY || direction === -1 && targetPositionY < positionY) {\n            raf = requestAnimationFrame(animate);\n        } else {\n            window.scrollTo(0, targetPositionY);\n            _this.triggerEvent('scrollDone');\n        }\n    };\n\n    function update() {\n        var distance = targetPositionYWithOffset - positionY;\n        var attraction = distance * acceleration;\n\n        applyForce(attraction);\n\n        velocityY *= friction;\n        positionY += velocityY;\n\n        return distance;\n    }\n\n    var applyForce = function applyForce(force) {\n        velocityY += force;\n    };\n\n    var render = function render() {\n        window.scrollTo(0, positionY);\n    };\n\n    window.addEventListener('mousewheel', function (event) {\n        if (raf) {\n            cancelAnimationFrame(raf);\n            raf = null;\n        }\n    }, {\n        passive: true\n    });\n\n    var scrollTo = function scrollTo(offset, callback) {\n        positionY = getScrollTop();\n        direction = positionY > offset ? -1 : 1;\n        targetPositionYWithOffset = offset + direction;\n        targetPositionY = offset;\n        velocityY = 0;\n        if (positionY != targetPositionY) {\n            animate();\n        } else {\n            _this.triggerEvent('scrollDone');\n        }\n    };\n\n    this.triggerEvent('scrollStart');\n    if (animatedScroll == 0) {\n        window.scrollTo(0, to);\n        this.triggerEvent('scrollDone');\n    } else {\n        scrollTo(to);\n    }\n};\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (text) {\n    var output = text.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(/\\//g, '-') // Replace / with -\n    .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n    .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n    if (output[0] == \"/\") output = output.splice(1);\n    if (output == '') output = 'homepage';\n    return output;\n};\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (popstate) {\n    if (this.options.scroll && (!popstate || this.options.animateHistoryBrowsing)) {\n        if (this.scrollToElement != null) {\n            var element = document.querySelector(this.scrollToElement);\n            if (element != null) {\n                var top = element.getBoundingClientRect().top + window.pageYOffset;\n                this.scrollTo(document.body, top);\n            } else {\n                console.warn(\"Element for offset not found (\" + this.scrollToElement + \")\");\n            }\n            this.scrollToElement = null;\n        } else {\n            this.scrollTo(document.body, 0);\n        }\n    }\n};\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _utils = __webpack_require__(0);\n\nmodule.exports = function (element) {\n    var _this = this;\n\n    var blocks = 0;\n\n    for (var i = 0; i < this.options.elements.length; i++) {\n        if (element.querySelector(this.options.elements[i]) == null) {\n            console.warn(\"Element \" + this.options.elements[i] + \" is not in current page.\");\n        } else {\n            (0, _utils.queryAll)(this.options.elements[i]).forEach(function (item, index) {\n                (0, _utils.queryAll)(_this.options.elements[i], element)[index].dataset.swup = blocks;\n                blocks++;\n            });\n        }\n    }\n};\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function on(event, handler) {\n    if (this._handlers[event]) {\n        this._handlers[event].push(handler);\n    } else {\n        console.warn(\"Unsupported event \" + event + \".\");\n    }\n};\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function off(event, handler) {\n    var _this = this;\n\n    if (event != null) {\n        if (handler != null) {\n            if (this._handlers[event] && this._handlers[event].filter(function (savedHandler) {\n                return savedHandler === handler;\n            }).length) {\n                var toRemove = this._handlers[event].filter(function (savedHandler) {\n                    return savedHandler === handler;\n                })[0];\n                var index = this._handlers[event].indexOf(toRemove);\n                if (index > -1) {\n                    this._handlers[event].splice(index, 1);\n                }\n            } else {\n                console.warn(\"Handler for event '\" + event + \"' no found.\");\n            }\n        } else {\n            this._handlers[event] = [];\n        }\n    } else {\n        Object.keys(this._handlers).forEach(function (keys) {\n            _this._handlers[keys] = [];\n        });\n    }\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (from, to, custom) {\n\n    // homepage case\n    if (from == \"/\") {\n        from = \"/homepage\";\n    }\n    if (to == \"/\") {\n        to = \"/homepage\";\n    }\n\n    // transition routes\n    this.transition = {\n        from: from.replace('/', ''),\n        to: to.replace('/', '')\n    };\n\n    if (custom) {\n        this.transition.custom = custom;\n    }\n};\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _Link = __webpack_require__(1);\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = function (pathname) {\n    var _this = this;\n\n    var link = new _Link2.default();\n    link.setPath(pathname);\n    if (link.getAddress() != this.currentUrl && !this.cache.exists(link.getAddress()) && this.preloadPromise == null) {\n        this.getPage({ url: link.getAddress() }, function (response, request) {\n            if (request.status === 500) {\n                _this.triggerEvent('serverError');\n                return;\n            } else {\n                // get json data\n                var page = _this.getDataFromHtml(response, request);\n                if (page != null) {\n                    page.url = link.getAddress();\n                    _this.cache.cacheUrl(page, _this.options.debugMode);\n                    _this.triggerEvent('pagePreloaded');\n                }\n            }\n        });\n    }\n};\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _utils = __webpack_require__(0);\n\nmodule.exports = function () {\n    var _this = this;\n\n    if (this.options.preload) {\n        (0, _utils.queryAll)('[data-swup-preload]').forEach(function (element) {\n            _this.preloadPage(element.href);\n        });\n    }\n};\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (plugin, options) {\n    var _this = this;\n\n    options = Object.assign({}, plugin.options, options);\n\n    plugin.options = options;\n\n    var getCurrentPageHtml = function getCurrentPageHtml() {\n        var page = _this.cache.getPage(window.location.pathname + window.location.search);\n        var html = document.createElement('html');\n        html.innerHTML = page.originalContent;\n        return html;\n    };\n\n    this.plugins.push(plugin);\n    plugin.exec(options, this, getCurrentPageHtml);\n    return this.plugins;\n};\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function (str) {\n    if (this.options.debugMode) {\n        console.log(str + '%c', 'color: #009ACD');\n    }\n};\n\n/***/ })\n/******/ ]);\n});"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","m","modules","Object","defineProperty","value","query","selector","context","arguments","length","undefined","document","querySelector","queryAll","Array","prototype","slice","call","querySelectorAll","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","Link","Constructor","protoProps","staticProps","_createClass","href","this","link","path","pathname","search","hash","instance","TypeError","_classCallCheck","createElement","default","obj","_index","_index2","__esModule","_extends","assign","source","hasOwnProperty","_delegate2","_interopRequireDefault","_Cache2","_Link2","_transitionEnd2","_request2","_getDataFromHtml2","_loadPage2","_renderPage2","_createState2","_triggerEvent2","_getUrl2","_scrollTo2","_classify2","_doScrolling2","_markSwupElements2","_on2","_off2","_updateTransition2","_preloadPage2","_preloadPages2","_usePlugin2","_log2","Swup","_this","options","support","history","console","warn","transitionEndEvent","Promise","toString","indexOf","delegatedListeners","click","LINK_SELECTOR","linkClickHandler","bind","mouseover","body","linkMouseoverHandler","formSubmit","FORM_SELECTOR","formSubmitHandler","addEventListener","popStateHandler","page","getDataFromHtml","documentElement","outerHTML","url","currentUrl","cache","cacheUrl","debugMode","markSwupElements","plugins","forEach","item","usePlugin","replaceState","state","location","random","Math","title","animateHistoryBrowsing","scrollRestoration","triggerEvent","classList","add","preloadPages","destroy","removeEventListener","empty","element","dataset","swup","off","remove","event","top","customTransition","metaKey","button","preventDefault","setPath","delegateTarget","getAddress","getHash","scroll","getBoundingClientRect","pageYOffset","scrollTo","scrollToElement","swupTransition","loadPage","_this2","preload","exists","preloadPromise","resolve","reject","getPage","response","request","status","route","form","formData","inputs","FormData","action","method","toLowerCase","data","input","type","checked","encodeURIComponent","name","skipPopStateHandling","setOptions","defaults","animationSelector","elements","pageClassPrefix","doScrollingRightAway","animateScroll","scrollFriction","scrollAcceleration","origin","transition","_handlers","animationInDone","animationInStart","animationOutDone","animationOutStart","animationSkipped","clickLink","contentReplaced","disabled","enabled","hoverLink","openPageInNewTab","pageLoaded","pagePreloaded","pageRetrievedFromCache","pageView","popState","samePage","samePageWithHash","scrollDone","scrollStart","serverError","submitForm","willReplaceContent","getUrl","renderPage","createState","classify","doScrolling","on","updateTransition","preloadPage","log","enable","closest","callback","useCapture","listenerFn","e","apply","proto","Element","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","nodeType","parentNode","Cache","displayCache","count","pages","last","groupCollapsed","keys","groupEnd","showLog","el","transEndEventNames","WebkitTransition","MozTransition","OTransition","style","XMLHttpRequest","onreadystatechange","readyState","responseText","open","setRequestHeader","send","_utils","html","content","replace","fakeDom","innerHTML","blocks","index","push","innerText","pageClass","className","originalContent","responseURL","popstate","animatedElements","pop","xhrPromise","animationPromises","promise","all","then","concat","catch","errorUrl","go","_Link","getPath","split","includes","setTimeout","promises","classItem","RegExp","test","pushState","hostname","getElementsByTagName","eventName","originalEvent","handler","error","CustomEvent","detail","dispatchEvent","to","animatedScroll","friction","acceleration","positionY","velocityY","targetPositionY","targetPositionYWithOffset","direction","raf","animate","applyForce","render","requestAnimationFrame","force","cancelAnimationFrame","passive","offset","scrollTop","text","output","splice","toRemove","filter","savedHandler","from","custom","plugin","exec","str","c","d","getter","o","get","r","Symbol","toStringTag","t","mode","ns","create","n","object","property","p","s","moduleId","l"],"mappings":"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","sourceRoot":"/source/"}